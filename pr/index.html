<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }
</style>

<body>
    <canvas id="canvas"></canvas>


    <script>
        var c = document.getElementById('canvas');
        var ctx = c.getContext('2d');
        var w = window.innerWidth;
        var h = window.innerHeight;
        c.width = w;
        c.height = h;
        class heartShape {
            constructor(x, y) {
                // 一个心，有坐标x、y，还有大小 d为心半个弧的直径，还有速度
                function randomColor() {
                    const colors = ['#ea9999', '#ff0000', '#ff00ff', '#ff9900', '#ffff00']
                    let i = Math.floor(Math.random() * colors.length)
                    return colors[i]
                }
                this.x = x;
                this.y = y;
                this.vy = -(1 + Math.random() * 6);
                this.d = 5 + + Math.random() * 5; // 圆的直径 矩形比例为 8:5
                this.border = this.d * 8 / 5 - this.d / 2;
                this.color = randomColor()
            }

            draw(ctx) {
                var rate = Math.cos(45 * Math.PI / 180);
                var x = this.x;
                var y = this.y;
                var left = {
                    a: [x, y],
                    b: [x - this.border * rate, y - this.border * rate],
                    c: [x - this.border * rate + this.d * rate, y - this.border * rate - this.d * rate],
                    d: [x + this.d * rate, y - this.d * rate]
                }
                var right = {
                    a: [x, y],
                    b: [x + this.border * rate, y - this.border * rate],
                    c: [x + this.border * rate - this.d * rate, y - this.border * rate - this.d * rate],
                    d: [x - this.d * rate, y - this.d * rate]
                }
                ctx.beginPath();
                ctx.moveTo(left.a[0], left.a[1]);
                ctx.lineTo(left.b[0], left.b[1])
                ctx.arc(left.b[0] + this.d * rate / 2, left.b[1] - this.d * rate / 2, this.d / 2, 3 * Math.PI / 4, 7 * Math.PI / 4, false);
                // ctx.lineTo(left.c[0], left.c[1])
                ctx.lineTo(left.d[0], left.d[1])
                ctx.lineTo(left.a[0], left.a[1]);
                ctx.fill()

                ctx.beginPath();
                ctx.moveTo(right.a[0], right.a[1]);
                ctx.lineTo(right.b[0], right.b[1])
                ctx.arc(right.b[0] - this.d * rate / 2, right.b[1] - this.d * rate / 2, this.d / 2, Math.PI / 4, 5 * Math.PI / 4, true);
                // ctx.lineTo(right.c[0], right.c[1])
                ctx.lineTo(right.d[0], right.d[1])
                ctx.lineTo(right.a[0], right.a[1]);
                ctx.fill()

            }
        }
        var list = [];
        for (let i = 0; i < 30; i++) {
            list.push(new heartShape(c.width * Math.random(), c.height * Math.random()))
        }
        function draw() {
            window.requestAnimationFrame(draw);
            ctx.clearRect(0, 0, w, h);

            list.forEach((item) => {

                item.y += item.vy;
                ctx.fillStyle = item.color;
                item.draw(ctx)
            })

        }
        draw()
    </script>
</body>

</html>